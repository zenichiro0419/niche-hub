# NicheHub 要件定義書

## 1. プロジェクト概要

**NicheHub**は、趣味や専門分野に特化したクローズド SNS であり、特定の興味・専門分野に基づくコミュニティを形成することにより、ユーザーが安心して交流できる安全な空間を実現するシステムです。

### 対象ユーザー

- 趣味や専門分野に強い関心を持つ個人
- 共通の興味に基づいて情報交換やコミュニケーションを求めるユーザー
- オープンな SNS ではなく、特定テーマに絞った交流を望むユーザー

### システムの主な目的

1. 特定分野に関する深い議論や情報交換の促進
2. クローズドな環境による安心感の提供
3. 趣味・専門分野ごとのコミュニティ形成支援

## 2. 技術要件

AI エージェントの Lovable を用いて実装を行います。

### フロントエンド

- フレームワーク：React.js/TypeScript
  - **UI コンポーネント**: Material-UI
  - **フォーム管理**: React Hook Form
  - **状態管理**: Redux Toolkit
  - **データフェッチ**: React Query
  - **アニメーション**: Framer Motion
- レスポンシブデザイン対応（モバイルファーストアプローチ）

### バックエンド

- Supabase
- データベース：PostgreSQL
- 認証：JWT (JSON Web Token)
- API：RESTful API 設計

## 3. 機能要件（フェーズ別）

### フェーズ 1 - MVP（最小実行製品）

#### 3.1 ユーザー管理機能

1. **ユーザー登録**

   - 必須情報：メールアドレス、ユーザー名、パスワード
   - メールによる認証確認プロセス
   - 利用規約同意の仕組み

2. **ログイン・認証**

   - JWT 認証によるセキュアなログイン
   - パスワードリセット機能
   - セッション管理

3. **コミュニティ選択**

   - 初回ログイン時の必須選択 UI
   - 視覚的なカテゴリ表示（アイコン・説明付き）
   - 最低 1 つのコミュニティ選択を要求

4. **基本プロフィール機能**
   - ユーザー名・自己紹介の編集
   - 任意のプロフィール画像設定
   - 所属コミュニティ表示

#### 3.2 コンテンツ・投稿機能

1. **テキスト投稿**

   - 280 文字以内のテキスト投稿
   - 選択したコミュニティ内のみに表示
   - 投稿日時の自動記録

2. **投稿閲覧**

   - 時系列表示のフィード形式
   - 所属コミュニティの投稿のみ表示
   - スクロールによる読み込み（無限スクロール）

3. **リアクション機能**

   - シンプルな「いいね」機能
   - いいね数のカウント表示
   - リアクションの取り消し機能

4. **コメント機能**
   - 投稿に対する 1 階層のコメント
   - コメント数表示
   - コメントの表示/非表示切り替え

#### 3.3 検索・ナビゲーション

1. **シンプル検索**

   - キーワードによる投稿検索
   - 所属コミュニティ内のみを対象
   - 検索結果の時系列表示

2. **基本ナビゲーション**
   - ホーム（フィード）画面
   - コミュニティ切り替え
   - 通知画面へのアクセス

#### 3.4 通知機能

1. **サイト内通知**
   - コメント受信時の通知
   - いいね受信時の通知
   - 既読/未読の管理

#### 3.5 管理者機能

1. **基本管理機能**
   - 不適切コンテンツの削除
   - ユーザー報告の確認
   - コミュニティの作成・編集

### フェーズ 2 - 拡張機能（将来実装）

#### 3.6 拡張ユーザー管理

1. **複数コミュニティへの所属**

   - 追加コミュニティへの参加機能
   - コミュニティごとの設定管理
   - 参加コミュニティの優先順位設定

2. **詳細プロフィール**
   - 専門分野・スキルの登録
   - 外部リンク（ポートフォリオなど）
   - 実績・バッジ表示

#### 3.7 拡張コンテンツ機能

1. **メディア投稿**

   - 画像投稿機能
   - 添付ファイル機能
   - 埋め込みリンクのプレビュー

2. **投稿フォーマット拡張**

   - マークダウン形式のサポート
   - コードブロックの構文ハイライト
   - メンション機能（@ユーザー名）

3. **高度なリアクション**
   - 複数種類のリアクション（笑い、驚き等）
   - リアクションユーザー一覧表示
   - カスタムリアクション（将来的に）

#### 3.8 コミュニケーション拡張

1. **ダイレクトメッセージ**

   - ユーザー間のプライベートメッセージ
   - 既読ステータス
   - 通知設定

2. **グループディスカッション**
   - トピックベースのスレッド機能
   - コミュニティ内のグループチャット
   - イベント作成・参加機能

#### 3.9 高度な管理機能

1. **モデレーション強化**

   - AI による不適切コンテンツ自動検出
   - モデレーターロールの追加
   - コミュニティガイドライン設定

2. **詳細分析ダッシュボード**
   - ユーザー活動統計
   - コンテンツエンゲージメント分析
   - コミュニティ健全性レポート

## 4. UI デザイン仕様

### 4.1 全体デザインコンセプト

- クリーンでミニマルなデザイン
- 読みやすさと使いやすさの重視
- コミュニティカラーによる視覚的区別
- モバイルファーストのレスポンシブデザイン

### 4.2 色彩設計

- **プライマリーカラー**: #5c6bc0（青紫）
- **セカンダリーカラー**: #9575cd（薄紫）
- **アクセントカラー**: #4db6ac（ティール）
- **ダークカラー**: #263238（濃紺）
- **ライトカラー**: #eceff1（薄灰）
- **テキストカラー**: #263238（基本）、#78909c（薄い文字）
- **警告・エラー**: #e57373（赤系）
- **成功・確認**: #81c784（緑系）

### 4.3 タイポグラフィ

- **基本フォント**: 'Segoe UI', 'Noto Sans JP', sans-serif
- **見出しサイズ**: 24px（大）、18px（中）、16px（小）
- **本文サイズ**: 15px（デスクトップ）、14px（モバイル）
- **アイコンフォント**: Material Icons または Font Awesome

### 4.4 UI 要素仕様

#### 4.4.1 ヘッダー

- 固定ヘッダー（スクロールしても表示）
- ロゴ、メインナビゲーション、プロフィールメニューを配置
- モバイル時はハンバーガーメニューに変更

#### 4.4.2 サイドバー（デスクトップ）

- コミュニティリスト表示
- 選択中コミュニティのハイライト
- 折りたたみ可能な設計
- モバイル時は非表示（メニューから呼び出し）

#### 4.4.3 メインコンテンツ

- カード形式の投稿表示
- 投稿作成フォームを上部に固定
- 無限スクロールによるコンテンツ読み込み
- 投稿間の適切な余白とセパレーター

#### 4.4.4 投稿カード

- ユーザーアバター、名前、投稿時間
- テキスト本文（適切な行間）
- リアクションボタンとカウンター
- コメントセクション（折りたたみ可能）

#### 4.4.5 フォームデザイン

- フローティングラベル
- 視認性の高いフォーカス状態
- エラーメッセージの明確な表示
- アクセシブルな入力要素

#### 4.4.6 ボタンデザイン

- プライマリーボタン：塗りつぶし + 角丸
- セカンダリーボタン：アウトライン + 角丸
- アイコンボタン：シンプルでわかりやすいアイコン
- ホバー・アクティブ状態の視覚的フィードバック

### 4.5 レスポンシブ設計

- **ブレイクポイント**:
  - モバイル: 〜480px
  - タブレット: 481px〜768px
  - デスクトップ: 769px〜
- **モバイル対応**:
  - ワンカラムレイアウト
  - タッチ操作に最適化（十分なタッチターゲットサイズ）
  - 限定的な機能表示と簡略化されたナビゲーション
- **タブレット対応**:
  - 選択的な 2 カラムレイアウト
  - サイドバーの簡易表示
- **デスクトップ対応**:
  - マルチカラムレイアウト
  - サイドバー常時表示
  - ホバーインタラクションの活用

## 5. 実装優先順位とステップ

### ステップ 1: 基盤構築

1. プロジェクト初期設定

   - React 環境構築
   - Supabase プロジェクト設定
   - 基本レイアウトコンポーネント作成

2. 認証システム構築

   - ユーザー登録フロー
   - ログイン機能
   - JWT 認証連携

3. データベース設計
   - ユーザーテーブル
   - コミュニティテーブル
   - 投稿・コメントテーブル

### ステップ 2: コア機能実装

1. ユーザーオンボーディング

   - コミュニティ選択 UI
   - 初期プロフィール設定

2. 投稿システム

   - テキスト投稿フォーム
   - 投稿一覧表示
   - いいね機能

3. コメント機能
   - コメント投稿・表示
   - コメントカウント

### ステップ 3: UI/UX 完成

1. レスポンシブ対応

   - モバイルレイアウト最適化
   - タブレット・デスクトップ対応

2. インタラクション改善

   - アニメーション追加
   - フィードバック強化

3. 検索機能
   - 検索アルゴリズム実装
   - 検索結果表示

### ステップ 4: 補完機能

1. 通知システム

   - 通知ロジック
   - 通知表示 UI

2. 管理者機能

   - 管理者ダッシュボード
   - モデレーションツール

3. パフォーマンス最適化
   - コード最適化
   - 読み込み速度改善

## 6. 技術的な考慮事項

### 6.1 セキュリティ

- **認証**: JWT 認証の適切な実装と期限管理
- **データ保護**: ユーザー情報の適切な暗号化
- **入力検証**: すべてのユーザー入力の厳格なバリデーション
- **CSRF/XSS 対策**: 適切なセキュリティヘッダーとサニタイズ処理

### 6.2 パフォーマンス

- **レイジーローディング**: 必要なコンポーネントのみ読み込み
- **キャッシュ戦略**: 適切なデータキャッシュによる負荷軽減
- **画像最適化**: 遅延読み込みと適切なサイズ最適化
- **クエリ最適化**: 効率的なデータベースクエリ設計

### 6.3 スケーラビリティ

- **コンポーネント設計**: 再利用可能なコンポーネント構成
- **状態管理**: 効率的な状態管理パターンの採用
- **拡張可能 API**: 将来の機能追加を見据えた API 設計
- **ドキュメント化**: コードと API 仕様の明確なドキュメント

### 6.4 アクセシビリティ

- **キーボードナビゲーション**: すべての機能にキーボードでアクセス可能
- **スクリーンリーダー対応**: 適切な ARIA 属性と意味的な HTML
- **コントラスト比**: 十分な色のコントラスト
- **フォーカス管理**: 明確なフォーカス状態の視覚的表示

## 7. テスト戦略

### 7.1 ユニットテスト

- コアコンポーネントのテスト
- ユーティリティ関数のテスト
- API インタラクションのモックテスト

### 7.2 インテグレーションテスト

- コンポーネント間の相互作用テスト
- フォーム送信フローのテスト
- 認証フローのテスト

### 7.3 UI/UX テスト

- レスポンシブ動作の確認
- ブラウザ互換性テスト
- ユーザビリティテスト

### 7.4 パフォーマンステスト

- 読み込み速度分析
- レンダリングパフォーマンス
- データベースクエリ最適化

## 8. 将来的な拡張性

現在の MVP 設計は、将来的に以下の機能を追加できるように考慮されています：

1. **高度なメディア機能**:

   - 画像・動画アップロード
   - ファイル共有システム
   - メディアギャラリー

2. **コミュニティ拡張**:

   - ユーザー作成コミュニティ
   - プライベートコミュニティ
   - サブコミュニティ構造

3. **コンテンツリッチ化**:

   - リッチテキストエディタ
   - 埋め込みコンテンツ
   - 投票・アンケート機能

4. **収益化オプション**:
   - プレミアム会員制
   - コミュニティマーケットプレイス
   - スポンサードコンテンツ

## 9. その他開発ツール

- **コード品質**: ESLint, Prettier
- **ビルドツール**: Vite
- **テスト**: Jest, React Testing Library
- **CI/CD**: GitHub Actions
